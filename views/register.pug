extends layout

block content
    div.head
        title Dashboard :: Register
        link(rel='stylesheet', href='//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css')
        link(rel='stylesheet', href='//cdn.kendostatic.com/2013.3.1119/styles/kendo.common.min.css')
        link(rel='stylesheet', href='//cdn.kendostatic.com/2013.3.1119/styles/kendo.bootstrap.min.css')
        link(rel='stylesheet', href='/stylesheets/login.css')
    div.body
        form(id='register-form', method='POST', action='/register' novalidate)
            .box
                h1 REGISTER
                .form-group
                input.register(type='text', name='fname', id='fname', placeholder='Enter first name', required, data-required-msg='First name is required')
                .form-group
                input.register(type='text', name='lname', id='lname', placeholder='Enter last name', required, data-required-msg='Last name is required')
                .form-group
                input.register(type='email', name='email', id='email', placeholder='Enter email', required, data-required-msg='Email address is required')
                .form-group
                input.register(type='text', name='username', id='username', placeholder='Enter username', required, data-required-msg='Username is required')
                .form-group
                input.password(type='password', name='password', id='password', placeholder='Enter password', required, data-required-msg='Password is required')
                .form-group
                input.password(type='password', name='confirm-password', id='confirm-password', placeholder='Confirm password', required, data-required-msg='Confirmation is required')    
                .form-group
                a(value='submit', )
                    #register.btn(type='submit', value='') Register
                //- links to register page
                a(href='/users/login')
                    #btn2 Sign In
                
block scripts
    script(src='//kendo.cdn.telerik.com/2017.1.118/js/kendo.all.min.js')

    script.

        $(function() {
        // cache references to input controls
        var password = $('#password');
        var confirmPassword = $('#confirm-password');
        var email = $('#email');
        var username = $('#username');
        var fname = $('#fname');
        var lname = $('#lname');
        var register = $('#register');

        //need names and username validation
        var validator = $("#register-form").kendoValidator({

            rules: {

            passwordMatch: function(input) {

                // passwords must match

                if (input.is('#confirm-password')) {
                return $.trim(password.val()) === $.trim(confirmPassword.val());
                }

                return true;

            },

            passwordLength: function(input) {

                // passwords must be 6 chars

                if (input.is('#password')) {
                    return $.trim(password.val()).length >= 6;
                }

                return true;

            },

            emailMatch: function(input) {

                // email must be valid
                if (input.is('#email')) {
                    var str = $.trim(email.val());
                    var patt = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
                    var res = patt.test(str);
                    return res;
                }
                return true;

            },

            userAlphanumeric: function(input) {

                // username must be alphanumeric
                if (input.is('#username')) {
                    var str = $.trim(username.val());
                    var patt = /^[a-z0-9_-]+$/i;
                    var res = patt.test(str);
                    return res;
                }
                return true;
            }
            },
            messages: {

            // custom error messages. email gets picked up 
            // automatically for any inputs of that type

            passwordMatch: 'The passwords don\'t match',
            passwordLength: 'Must be at least 6 characters',
            userAlphanumeric: 'Letters, numbers, -, _ only',
            emailMatch: 'Must be a valid email'
            }

        }).getKendoValidator(); //.data('kendoValidator');

        $('#register').on("click", function() {
            if (validator.validate()) {
                // If the form is valid, the Validator will return true
                //do stuff
            }
        });

        });
